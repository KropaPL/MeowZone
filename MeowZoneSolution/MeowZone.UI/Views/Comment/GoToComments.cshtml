@using MeowZone.Core.Domain.Entities
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model CommentAddRequest

@{
    var comments = (List<Comment>)ViewBag.Comments;
}

@{
	ViewBag.Title = "Add Comment";
	Layout = "_Layout";
}

<div class="welcome-text">
	@ViewBag.PostTitle
</div>
<div class="small-welcome-text">
	@ViewBag.CreatedAt
</div>
<div class="small-welcome-text">
	@ViewBag.Content
</div>

<div class="small-welcome-text">
	Add comment
</div>

@{
	foreach (var comment in comments)
	{
		<div>
			@comment.AuthorName
		</div>
		<div>
			@comment.CreatedAt
		</div>
		<div>
			@comment.CommentContent
		</div>
		<form method="post" asp-controller="Comment" asp-action="DeleteComment">
			<input type="hidden" name="postId" value="@Model.PostId" />
			<input type="hidden" name="commentId" value="@comment.Id" />
			<button type="submit" class="btn btn-danger">Delete</button>
		</form>

		<form method="get" asp-controller="Comment" asp-action="EditComment">
			<input type="hidden" name="postId" value="@Model.PostId" />
			<input type="hidden" name="commentId" value="@comment.Id" />
			<input type="hidden" name="AuthorId" value="@comment.AuthorId" />
			<button type="submit" class="btn btn-danger">Edit</button>
		</form>


		<br/>
	}
}

<form asp-controller="Comment" asp-action="AddComment" method="post">
	<div class="form-group">
		<label asp-for="CommentContent" class="control-label">Comment</label>
		<input asp-for="CommentContent" class="form-control" />
		<span asp-validation-for="CommentContent" class="text-danger"></span>
	</div>
	<input type="hidden" asp-for="PostId" />
	<button type="submit" class="btn btn-primary">Add Comment</button>
</form>
